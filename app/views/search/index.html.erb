<h1 class="mb-4">Search</h1>

<h3 class="mb-3">articles</h3>

<!-- Search Form -->
<div>
  <input type="text" id="search-input" placeholder="Search by article title" />
</div>

<!-- Search Results -->
<div id="article-results">
  <%= render partial: 'articles_list', locals: { articles: @articles } %>
</div>


<!-- JavaScript to Handle AJAX -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const searchInput = document.getElementById('search-input');
    
    searchInput.addEventListener('input', function() {
      let query = searchInput.value;

      // Perform AJAX request to search_articles
      fetch(`/search_articles?query=${encodeURIComponent(query)}`, {
        method: 'GET',
        headers: { 'X-Requested-With': 'XMLHttpRequest' }
      })
      .then(response => response.text())
      .then(html => {
        // Update the search results
        document.getElementById('article-results').innerHTML = html;
      })
      .catch(error => console.error('Error fetching articles:', error));
    });
  });
</script>